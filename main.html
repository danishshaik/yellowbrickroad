<!DOCTYPE html>
<html>
<head>
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDwP_X6t8wj2QpFWG7Aqj7Wq-psO_dihRE"></script>
<script>
/*
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else { 
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}
*/

function initialize() {
	// if(navigator.geolocation){
	// 	console.log(navigator.geolocation.getCurrentPosition(function (pos){
	// 		console.log('sdfsf');
	// 	}));
	// }
	var myLatlng = new google.maps.LatLng(37.776319,-122.416897);
	var mapProp = {
    center:myLatlng,
    zoom:16,
    mapTypeId:google.maps.MapTypeId.ROADMAP

  };
  var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);


	; 


	
  var mapProp = {
    center:myLatlng,
    zoom:16,
    mapTypeId:google.maps.MapTypeId.ROADMAP

  };
  var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

      var styles = [
  {
    stylers: [
      { hue: "#00ffe6" },
      { saturation: -20 }
    ]
  },{
    featureType: "road",
    elementType: "geometry",
    stylers: [
      { lightness: 100 },
      { visibility: "simplified" }
    ]
  },{
    featureType: "road",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  }
];

map.setOptions({styles: styles});


  var marker = new google.maps.Marker
  ({
      position: myLatlng,
      map: map,
      title: 'You are here',
      draggable:false,
      animation: google.maps.Animation.DROP
       
  });

  google.maps.event.addListener(map, 'click', function(e) {   
	console.log(e);     
        var marker = new google.maps.Marker({
            position: e["latLng"],
            //title:"Hello World!",
            icon: darknesspic
        });       
        marker.setMap(map);
        google.maps.event.addListener(marker, 'click', function(e) {       
        
        	console.log(e,marker.icon);
        	if (marker.getIcon() == darknesspic)
        		marker.setIcon(catpic);
        	else if(marker.getIcon() == catpic)
        	{
        		 marker.setIcon(harrassmentpic);
        	}
        	
        	else if(marker.getIcon() == harrassmentpic)
        	{
        		marker.setIcon(cautionpic);
        		
        	}
        	
        	else 
        	{
        		marker.setIcon(darknesspic);
        	}
   		
   		});

   });

	var darknesspic = "smalldarkness.png";
	var threatLatLng = new google.maps.LatLng(37.3197619,-122.0464389);
  var darkness = new google.maps.Marker
  ({
      position: threatLatLng,
      map: map,
      title: 'Poor lighting',
      draggable:true,
      animation: google.maps.Animation.DROP,
      icon: darknesspic
  });

  var catpic = "catcall.png";
	var catLatLng = new google.maps.LatLng(37.322631,-122.041065);
  var catcall = new google.maps.Marker
  ({
      position: catLatLng,
      map: map,
      title: 'Catcaller',
      draggable:true,
      animation: google.maps.Animation.DROP,
      icon: catpic
  });


  var harrassmentpic = "harrassment.png";
	var harrassmentLatLng = new google.maps.LatLng(37.322535,-122.03468900000001);
  var harrassment = new google.maps.Marker
  ({
      position: harrassmentLatLng,
      map: map,
      title: 'Harrassment',
      draggable:true,
      animation: google.maps.Animation.DROP,
      icon: harrassmentpic
  });


var cautionpic = "caution.png";
	var cautionLatLng = new google.maps.LatLng(37.323595,-122.03951);
  var caution = new google.maps.Marker
  ({
      position: cautionLatLng,
      map: map,
      title: 'Unspecified Threat',
      draggable:true,
      animation: google.maps.Animation.DROP,
      icon: cautionpic
  });
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>

<!--some formatting thing-->
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map-canvas { height: 100% }
</style>



</head>


<body>

<!--div id="googleMap" style="width:500px;height:380px;"></div-->
<!--might be a new map??-->
<div id="googleMap" style="width: 100%; height: 100%"></div>
</body>

</html>